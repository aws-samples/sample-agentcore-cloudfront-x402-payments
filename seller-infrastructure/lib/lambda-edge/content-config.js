"use strict";
/**
 * Dynamic Content Configuration Module
 *
 * This module provides dynamic content and pricing configuration for the x402 payment verifier.
 * Content can be loaded from:
 * 1. Static configuration (default)
 * 2. Environment variables (for pricing overrides)
 * 3. S3 bucket (for dynamic content)
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.contentManager = exports.ContentManager = exports.DEFAULT_CONTENT_REGISTRY = void 0;
exports.createPaymentRequirements = createPaymentRequirements;
// ============================================================================
// Default Configuration
// ============================================================================
/**
 * Default payment recipient address
 * Can be overridden via PAYMENT_RECIPIENT environment variable
 */
const DEFAULT_PAY_TO = process.env.PAYMENT_RECIPIENT || '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb';
/**
 * Default network (Base Sepolia testnet)
 * Can be overridden via PAYMENT_NETWORK environment variable
 */
const DEFAULT_NETWORK = process.env.PAYMENT_NETWORK || 'eip155:84532';
/**
 * Default asset (USDC on Base Sepolia)
 * Can be overridden via PAYMENT_ASSET environment variable
 */
const DEFAULT_ASSET = process.env.PAYMENT_ASSET || '0x036CbD53842c5426634e7929541eC2318f3dCF7e';
/**
 * Creates default payment requirements with optional overrides
 */
function createPaymentRequirements(amount, overrides) {
    return {
        scheme: 'exact',
        network: DEFAULT_NETWORK,
        amount,
        asset: DEFAULT_ASSET,
        payTo: DEFAULT_PAY_TO,
        maxTimeoutSeconds: 60,
        extra: {
            name: 'USDC',
            version: '2',
            assetTransferMethod: 'eip3009',
        },
        ...overrides,
    };
}
// ============================================================================
// Default Content Registry
// ============================================================================
/**
 * Default content registry with static content
 */
exports.DEFAULT_CONTENT_REGISTRY = {
    version: '1.0.0',
    defaultPayTo: DEFAULT_PAY_TO,
    defaultNetwork: DEFAULT_NETWORK,
    defaultAsset: DEFAULT_ASSET,
    items: {
        '/api/premium-article': {
            id: 'premium-article',
            path: '/api/premium-article',
            title: 'The Future of AI and Blockchain Integration',
            description: 'Premium article about AI and blockchain convergence',
            mimeType: 'application/json',
            pricing: createPaymentRequirements('1000'),
            source: {
                type: 'inline',
                data: {
                    title: 'The Future of AI and Blockchain Integration',
                    author: 'Tech Insights',
                    date: new Date().toISOString().split('T')[0],
                    content: 'Artificial Intelligence and Blockchain are converging to create unprecedented opportunities...',
                    fullText: 'This is premium content that requires payment to access. The integration of AI and blockchain technology is revolutionizing how we think about decentralized systems, smart contracts, and autonomous agents. Key areas of innovation include: 1) Decentralized AI training, 2) Smart contract automation, 3) Tokenized AI services, 4) Privacy-preserving computation.',
                    tags: ['AI', 'blockchain', 'technology', 'innovation'],
                },
            },
        },
        '/api/weather-data': {
            id: 'weather-data',
            path: '/api/weather-data',
            title: 'Real-time Weather Data',
            description: 'Current weather conditions and forecast',
            mimeType: 'application/json',
            pricing: createPaymentRequirements('500'),
            source: {
                type: 'dynamic',
                generator: 'weather',
            },
        },
        '/api/market-analysis': {
            id: 'market-analysis',
            path: '/api/market-analysis',
            title: 'Cryptocurrency Market Analysis',
            description: 'Real-time market data and analysis',
            mimeType: 'application/json',
            pricing: createPaymentRequirements('2000'),
            source: {
                type: 'dynamic',
                generator: 'market',
            },
        },
    },
};
// ============================================================================
// Dynamic Content Generators
// ============================================================================
/**
 * Generates dynamic weather data
 */
function generateWeatherData() {
    const conditions = ['Sunny', 'Partly Cloudy', 'Cloudy', 'Rain', 'Thunderstorm', 'Snow', 'Fog'];
    const cities = [
        { name: 'San Francisco, CA', tempRange: [50, 70] },
        { name: 'New York, NY', tempRange: [30, 85] },
        { name: 'Miami, FL', tempRange: [65, 95] },
        { name: 'Seattle, WA', tempRange: [40, 75] },
        { name: 'Denver, CO', tempRange: [25, 80] },
    ];
    const city = cities[Math.floor(Math.random() * cities.length)];
    const temp = Math.floor(Math.random() * (city.tempRange[1] - city.tempRange[0])) + city.tempRange[0];
    return {
        location: city.name,
        timestamp: new Date().toISOString(),
        current: {
            temperature: temp,
            temperatureUnit: 'F',
            conditions: conditions[Math.floor(Math.random() * conditions.length)],
            humidity: Math.floor(Math.random() * 60) + 30,
            windSpeed: Math.floor(Math.random() * 25) + 5,
            windUnit: 'mph',
            uvIndex: Math.floor(Math.random() * 11),
        },
        forecast: Array.from({ length: 5 }, (_, i) => ({
            day: new Date(Date.now() + (i + 1) * 24 * 60 * 60 * 1000).toLocaleDateString('en-US', { weekday: 'short' }),
            conditions: conditions[Math.floor(Math.random() * conditions.length)],
            high: temp + Math.floor(Math.random() * 10),
            low: temp - Math.floor(Math.random() * 15),
        })),
        source: 'x402-weather-service',
        premium: true,
    };
}
/**
 * Generates dynamic market analysis data
 */
function generateMarketData() {
    const cryptos = [
        { symbol: 'BTC', name: 'Bitcoin', basePrice: 98000 },
        { symbol: 'ETH', name: 'Ethereum', basePrice: 3800 },
        { symbol: 'SOL', name: 'Solana', basePrice: 145 },
        { symbol: 'AVAX', name: 'Avalanche', basePrice: 42 },
        { symbol: 'MATIC', name: 'Polygon', basePrice: 0.85 },
    ];
    const markets = {};
    for (const crypto of cryptos) {
        const changePercent = (Math.random() * 10 - 5).toFixed(2);
        const price = crypto.basePrice * (1 + parseFloat(changePercent) / 100);
        const volume = (Math.random() * 30 + 5).toFixed(1);
        markets[crypto.symbol] = {
            name: crypto.name,
            price: price.toFixed(2),
            change24h: `${parseFloat(changePercent) >= 0 ? '+' : ''}${changePercent}%`,
            volume24h: `$${volume}B`,
            marketCap: `$${(price * (crypto.symbol === 'BTC' ? 19.5 : crypto.symbol === 'ETH' ? 120 : 400)).toFixed(0)}M`,
        };
    }
    const sentiments = ['Bullish', 'Bearish', 'Neutral', 'Very Bullish', 'Cautiously Optimistic'];
    return {
        timestamp: new Date().toISOString(),
        date: new Date().toISOString().split('T')[0],
        markets,
        analysis: {
            overallSentiment: sentiments[Math.floor(Math.random() * sentiments.length)],
            summary: 'Market showing mixed signals with major cryptocurrencies experiencing varied momentum. Technical indicators suggest potential consolidation phase.',
            keyEvents: [
                'Federal Reserve meeting scheduled for next week',
                'Major protocol upgrade announced for Ethereum',
                'Institutional adoption continues to grow',
            ],
            riskLevel: ['Low', 'Medium', 'High'][Math.floor(Math.random() * 3)],
        },
        source: 'x402-market-service',
        premium: true,
    };
}
/**
 * Content generators registry
 */
const CONTENT_GENERATORS = {
    weather: generateWeatherData,
    market: generateMarketData,
};
// ============================================================================
// Content Manager
// ============================================================================
/**
 * Content Manager class for handling dynamic content
 */
class ContentManager {
    constructor(registry = exports.DEFAULT_CONTENT_REGISTRY) {
        this.registry = registry;
    }
    /**
     * Gets payment requirements for a given path
     */
    getPaymentRequirements(path) {
        const item = this.registry.items[path];
        return item?.pricing || null;
    }
    /**
     * Gets content for a given path
     */
    async getContent(path) {
        const item = this.registry.items[path];
        if (!item) {
            return { error: 'Content not found', path };
        }
        switch (item.source.type) {
            case 'inline':
                return item.source.data;
            case 'dynamic':
                const generator = CONTENT_GENERATORS[item.source.generator];
                if (generator) {
                    return generator();
                }
                return { error: 'Generator not found', generator: item.source.generator };
            case 's3':
                // S3 content would be fetched here
                // Note: Lambda@Edge has limited S3 access, so this would need
                // to be handled differently in production (e.g., origin request)
                return {
                    error: 'S3 content not available in edge function',
                    bucket: item.source.bucket,
                    key: item.source.key,
                };
            default:
                return { error: 'Unknown content source type' };
        }
    }
    /**
     * Gets content item metadata
     */
    getContentItem(path) {
        return this.registry.items[path] || null;
    }
    /**
     * Lists all available content paths
     */
    listContentPaths() {
        return Object.keys(this.registry.items);
    }
    /**
     * Checks if a path requires payment
     */
    requiresPayment(path) {
        return path in this.registry.items;
    }
    /**
     * Gets the content registry version
     */
    getVersion() {
        return this.registry.version;
    }
    /**
     * Adds or updates a content item
     */
    setContentItem(item) {
        this.registry.items[item.path] = item;
    }
    /**
     * Removes a content item
     */
    removeContentItem(path) {
        if (path in this.registry.items) {
            delete this.registry.items[path];
            return true;
        }
        return false;
    }
}
exports.ContentManager = ContentManager;
// ============================================================================
// Singleton Instance
// ============================================================================
/**
 * Default content manager instance
 */
exports.contentManager = new ContentManager();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC1jb25maWcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb250ZW50LWNvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7O0dBUUc7OztBQStFSCw4REFrQkM7QUEzQ0QsK0VBQStFO0FBQy9FLHdCQUF3QjtBQUN4QiwrRUFBK0U7QUFFL0U7OztHQUdHO0FBQ0gsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsSUFBSSwyQ0FBMkMsQ0FBQztBQUVwRzs7O0dBR0c7QUFDSCxNQUFNLGVBQWUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsSUFBSSxjQUFjLENBQUM7QUFFdEU7OztHQUdHO0FBQ0gsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLElBQUksNENBQTRDLENBQUM7QUFFaEc7O0dBRUc7QUFDSCxTQUFnQix5QkFBeUIsQ0FDdkMsTUFBYyxFQUNkLFNBQXdDO0lBRXhDLE9BQU87UUFDTCxNQUFNLEVBQUUsT0FBTztRQUNmLE9BQU8sRUFBRSxlQUFlO1FBQ3hCLE1BQU07UUFDTixLQUFLLEVBQUUsYUFBYTtRQUNwQixLQUFLLEVBQUUsY0FBYztRQUNyQixpQkFBaUIsRUFBRSxFQUFFO1FBQ3JCLEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLEdBQUc7WUFDWixtQkFBbUIsRUFBRSxTQUFTO1NBQy9CO1FBQ0QsR0FBRyxTQUFTO0tBQ2IsQ0FBQztBQUNKLENBQUM7QUFFRCwrRUFBK0U7QUFDL0UsMkJBQTJCO0FBQzNCLCtFQUErRTtBQUUvRTs7R0FFRztBQUNVLFFBQUEsd0JBQXdCLEdBQW9CO0lBQ3ZELE9BQU8sRUFBRSxPQUFPO0lBQ2hCLFlBQVksRUFBRSxjQUFjO0lBQzVCLGNBQWMsRUFBRSxlQUFlO0lBQy9CLFlBQVksRUFBRSxhQUFhO0lBQzNCLEtBQUssRUFBRTtRQUNMLHNCQUFzQixFQUFFO1lBQ3RC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LE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUM7SUFDL0IsQ0FBQztJQUVEOztPQUVHO0lBQ0gsY0FBYyxDQUFDLElBQWlCO1FBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDeEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsaUJBQWlCLENBQUMsSUFBWTtRQUM1QixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2hDLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDakMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0NBQ0Y7QUFoR0Qsd0NBZ0dDO0FBRUQsK0VBQStFO0FBQy9FLHFCQUFxQjtBQUNyQiwrRUFBK0U7QUFFL0U7O0dBRUc7QUFDVSxRQUFBLGNBQWMsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEeW5hbWljIENvbnRlbnQgQ29uZmlndXJhdGlvbiBNb2R1bGVcbiAqIFxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgZHluYW1pYyBjb250ZW50IGFuZCBwcmljaW5nIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSB4NDAyIHBheW1lbnQgdmVyaWZpZXIuXG4gKiBDb250ZW50IGNhbiBiZSBsb2FkZWQgZnJvbTpcbiAqIDEuIFN0YXRpYyBjb25maWd1cmF0aW9uIChkZWZhdWx0KVxuICogMi4gRW52aXJvbm1lbnQgdmFyaWFibGVzIChmb3IgcHJpY2luZyBvdmVycmlkZXMpXG4gKiAzLiBTMyBidWNrZXQgKGZvciBkeW5hbWljIGNvbnRlbnQpXG4gKi9cblxuaW1wb3J0IHsgUGF5bWVudFJlcXVpcmVtZW50cyB9IGZyb20gJy4vdHlwZXMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDb250ZW50IENvbmZpZ3VyYXRpb24gVHlwZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDb250ZW50IGl0ZW0gd2l0aCBtZXRhZGF0YSBhbmQgcHJpY2luZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRJdGVtIHtcbiAgLyoqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudCAqL1xuICBpZDogc3RyaW5nO1xuICAvKiogVVJMIHBhdGggZm9yIHRoZSBjb250ZW50ICovXG4gIHBhdGg6IHN0cmluZztcbiAgLyoqIEh1bWFuLXJlYWRhYmxlIHRpdGxlICovXG4gIHRpdGxlOiBzdHJpbmc7XG4gIC8qKiBDb250ZW50IGRlc2NyaXB0aW9uICovXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIC8qKiBNSU1FIHR5cGUgb2YgdGhlIGNvbnRlbnQgKi9cbiAgbWltZVR5cGU6IHN0cmluZztcbiAgLyoqIFBheW1lbnQgcmVxdWlyZW1lbnRzIGZvciB0aGlzIGNvbnRlbnQgKi9cbiAgcHJpY2luZzogUGF5bWVudFJlcXVpcmVtZW50cztcbiAgLyoqIENvbnRlbnQgc291cmNlIC0gaW5saW5lIGRhdGEgb3IgUzMgcmVmZXJlbmNlICovXG4gIHNvdXJjZTogQ29udGVudFNvdXJjZTtcbiAgLyoqIE9wdGlvbmFsIG1ldGFkYXRhICovXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbi8qKlxuICogQ29udGVudCBzb3VyY2UgLSBlaXRoZXIgaW5saW5lIGRhdGEgb3IgUzMgcmVmZXJlbmNlXG4gKi9cbmV4cG9ydCB0eXBlIENvbnRlbnRTb3VyY2UgPSBcbiAgfCB7IHR5cGU6ICdpbmxpbmUnOyBkYXRhOiB1bmtub3duIH1cbiAgfCB7IHR5cGU6ICdzMyc7IGJ1Y2tldDogc3RyaW5nOyBrZXk6IHN0cmluZyB9XG4gIHwgeyB0eXBlOiAnZHluYW1pYyc7IGdlbmVyYXRvcjogc3RyaW5nIH07XG5cbi8qKlxuICogQ29udGVudCByZWdpc3RyeSBmb3IgbWFuYWdpbmcgYWxsIGF2YWlsYWJsZSBjb250ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudFJlZ2lzdHJ5IHtcbiAgLyoqIFZlcnNpb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gKi9cbiAgdmVyc2lvbjogc3RyaW5nO1xuICAvKiogRGVmYXVsdCBwYXltZW50IHJlY2lwaWVudCBhZGRyZXNzICovXG4gIGRlZmF1bHRQYXlUbzogc3RyaW5nO1xuICAvKiogRGVmYXVsdCBuZXR3b3JrIGZvciBwYXltZW50cyAqL1xuICBkZWZhdWx0TmV0d29yazogc3RyaW5nO1xuICAvKiogRGVmYXVsdCBhc3NldCBmb3IgcGF5bWVudHMgKi9cbiAgZGVmYXVsdEFzc2V0OiBzdHJpbmc7XG4gIC8qKiBDb250ZW50IGl0ZW1zIGluZGV4ZWQgYnkgcGF0aCAqL1xuICBpdGVtczogUmVjb3JkPHN0cmluZywgQ29udGVudEl0ZW0+O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEZWZhdWx0IENvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBEZWZhdWx0IHBheW1lbnQgcmVjaXBpZW50IGFkZHJlc3NcbiAqIENhbiBiZSBvdmVycmlkZGVuIHZpYSBQQVlNRU5UX1JFQ0lQSUVOVCBlbnZpcm9ubWVudCB2YXJpYWJsZVxuICovXG5jb25zdCBERUZBVUxUX1BBWV9UTyA9IHByb2Nlc3MuZW52LlBBWU1FTlRfUkVDSVBJRU5UIHx8ICcweDc0MmQzNUNjNjYzNEMwNTMyOTI1YTNiODQ0QmM5ZTc1OTVmMGJFYic7XG5cbi8qKlxuICogRGVmYXVsdCBuZXR3b3JrIChCYXNlIFNlcG9saWEgdGVzdG5ldClcbiAqIENhbiBiZSBvdmVycmlkZGVuIHZpYSBQQVlNRU5UX05FVFdPUksgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqL1xuY29uc3QgREVGQVVMVF9ORVRXT1JLID0gcHJvY2Vzcy5lbnYuUEFZTUVOVF9ORVRXT1JLIHx8ICdlaXAxNTU6ODQ1MzInO1xuXG4vKipcbiAqIERlZmF1bHQgYXNzZXQgKFVTREMgb24gQmFzZSBTZXBvbGlhKVxuICogQ2FuIGJlIG92ZXJyaWRkZW4gdmlhIFBBWU1FTlRfQVNTRVQgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqL1xuY29uc3QgREVGQVVMVF9BU1NFVCA9IHByb2Nlc3MuZW52LlBBWU1FTlRfQVNTRVQgfHwgJzB4MDM2Q2JENTM4NDJjNTQyNjYzNGU3OTI5NTQxZUMyMzE4ZjNkQ0Y3ZSc7XG5cbi8qKlxuICogQ3JlYXRlcyBkZWZhdWx0IHBheW1lbnQgcmVxdWlyZW1lbnRzIHdpdGggb3B0aW9uYWwgb3ZlcnJpZGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQYXltZW50UmVxdWlyZW1lbnRzKFxuICBhbW91bnQ6IHN0cmluZyxcbiAgb3ZlcnJpZGVzPzogUGFydGlhbDxQYXltZW50UmVxdWlyZW1lbnRzPlxuKTogUGF5bWVudFJlcXVpcmVtZW50cyB7XG4gIHJldHVybiB7XG4gICAgc2NoZW1lOiAnZXhhY3QnLFxuICAgIG5ldHdvcms6IERFRkFVTFRfTkVUV09SSyxcbiAgICBhbW91bnQsXG4gICAgYXNzZXQ6IERFRkFVTFRfQVNTRVQsXG4gICAgcGF5VG86IERFRkFVTFRfUEFZX1RPLFxuICAgIG1heFRpbWVvdXRTZWNvbmRzOiA2MCxcbiAgICBleHRyYToge1xuICAgICAgbmFtZTogJ1VTREMnLFxuICAgICAgdmVyc2lvbjogJzInLFxuICAgICAgYXNzZXRUcmFuc2Zlck1ldGhvZDogJ2VpcDMwMDknLFxuICAgIH0sXG4gICAgLi4ub3ZlcnJpZGVzLFxuICB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEZWZhdWx0IENvbnRlbnQgUmVnaXN0cnlcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBEZWZhdWx0IGNvbnRlbnQgcmVnaXN0cnkgd2l0aCBzdGF0aWMgY29udGVudFxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT05URU5UX1JFR0lTVFJZOiBDb250ZW50UmVnaXN0cnkgPSB7XG4gIHZlcnNpb246ICcxLjAuMCcsXG4gIGRlZmF1bHRQYXlUbzogREVGQVVMVF9QQVlfVE8sXG4gIGRlZmF1bHROZXR3b3JrOiBERUZBVUxUX05FVFdPUkssXG4gIGRlZmF1bHRBc3NldDogREVGQVVMVF9BU1NFVCxcbiAgaXRlbXM6IHtcbiAgICAnL2FwaS9wcmVtaXVtLWFydGljbGUnOiB7XG4gICAgICBpZDogJ3ByZW1pdW0tYXJ0aWNsZScsXG4gICAgICBwYXRoOiAnL2FwaS9wcmVtaXVtLWFydGljbGUnLFxuICAgICAgdGl0bGU6ICdUaGUgRnV0dXJlIG9mIEFJIGFuZCBCbG9ja2NoYWluIEludGVncmF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUHJlbWl1bSBhcnRpY2xlIGFib3V0IEFJIGFuZCBibG9ja2NoYWluIGNvbnZlcmdlbmNlJyxcbiAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICBwcmljaW5nOiBjcmVhdGVQYXltZW50UmVxdWlyZW1lbnRzKCcxMDAwJyksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogJ2lubGluZScsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogJ1RoZSBGdXR1cmUgb2YgQUkgYW5kIEJsb2NrY2hhaW4gSW50ZWdyYXRpb24nLFxuICAgICAgICAgIGF1dGhvcjogJ1RlY2ggSW5zaWdodHMnLFxuICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICAgIGNvbnRlbnQ6ICdBcnRpZmljaWFsIEludGVsbGlnZW5jZSBhbmQgQmxvY2tjaGFpbiBhcmUgY29udmVyZ2luZyB0byBjcmVhdGUgdW5wcmVjZWRlbnRlZCBvcHBvcnR1bml0aWVzLi4uJyxcbiAgICAgICAgICBmdWxsVGV4dDogJ1RoaXMgaXMgcHJlbWl1bSBjb250ZW50IHRoYXQgcmVxdWlyZXMgcGF5bWVudCB0byBhY2Nlc3MuIFRoZSBpbnRlZ3JhdGlvbiBvZiBBSSBhbmQgYmxvY2tjaGFpbiB0ZWNobm9sb2d5IGlzIHJldm9sdXRpb25pemluZyBob3cgd2UgdGhpbmsgYWJvdXQgZGVjZW50cmFsaXplZCBzeXN0ZW1zLCBzbWFydCBjb250cmFjdHMsIGFuZCBhdXRvbm9tb3VzIGFnZW50cy4gS2V5IGFyZWFzIG9mIGlubm92YXRpb24gaW5jbHVkZTogMSkgRGVjZW50cmFsaXplZCBBSSB0cmFpbmluZywgMikgU21hcnQgY29udHJhY3QgYXV0b21hdGlvbiwgMykgVG9rZW5pemVkIEFJIHNlcnZpY2VzLCA0KSBQcml2YWN5LXByZXNlcnZpbmcgY29tcHV0YXRpb24uJyxcbiAgICAgICAgICB0YWdzOiBbJ0FJJywgJ2Jsb2NrY2hhaW4nLCAndGVjaG5vbG9neScsICdpbm5vdmF0aW9uJ10sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgJy9hcGkvd2VhdGhlci1kYXRhJzoge1xuICAgICAgaWQ6ICd3ZWF0aGVyLWRhdGEnLFxuICAgICAgcGF0aDogJy9hcGkvd2VhdGhlci1kYXRhJyxcbiAgICAgIHRpdGxlOiAnUmVhbC10aW1lIFdlYXRoZXIgRGF0YScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0N1cnJlbnQgd2VhdGhlciBjb25kaXRpb25zIGFuZCBmb3JlY2FzdCcsXG4gICAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgcHJpY2luZzogY3JlYXRlUGF5bWVudFJlcXVpcmVtZW50cygnNTAwJyksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogJ2R5bmFtaWMnLFxuICAgICAgICBnZW5lcmF0b3I6ICd3ZWF0aGVyJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAnL2FwaS9tYXJrZXQtYW5hbHlzaXMnOiB7XG4gICAgICBpZDogJ21hcmtldC1hbmFseXNpcycsXG4gICAgICBwYXRoOiAnL2FwaS9tYXJrZXQtYW5hbHlzaXMnLFxuICAgICAgdGl0bGU6ICdDcnlwdG9jdXJyZW5jeSBNYXJrZXQgQW5hbHlzaXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdSZWFsLXRpbWUgbWFya2V0IGRhdGEgYW5kIGFuYWx5c2lzJyxcbiAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICBwcmljaW5nOiBjcmVhdGVQYXltZW50UmVxdWlyZW1lbnRzKCcyMDAwJyksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogJ2R5bmFtaWMnLFxuICAgICAgICBnZW5lcmF0b3I6ICdtYXJrZXQnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRHluYW1pYyBDb250ZW50IEdlbmVyYXRvcnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgZHluYW1pYyB3ZWF0aGVyIGRhdGFcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVXZWF0aGVyRGF0YSgpOiB1bmtub3duIHtcbiAgY29uc3QgY29uZGl0aW9ucyA9IFsnU3VubnknLCAnUGFydGx5IENsb3VkeScsICdDbG91ZHknLCAnUmFpbicsICdUaHVuZGVyc3Rvcm0nLCAnU25vdycsICdGb2cnXTtcbiAgY29uc3QgY2l0aWVzID0gW1xuICAgIHsgbmFtZTogJ1NhbiBGcmFuY2lzY28sIENBJywgdGVtcFJhbmdlOiBbNTAsIDcwXSB9LFxuICAgIHsgbmFtZTogJ05ldyBZb3JrLCBOWScsIHRlbXBSYW5nZTogWzMwLCA4NV0gfSxcbiAgICB7IG5hbWU6ICdNaWFtaSwgRkwnLCB0ZW1wUmFuZ2U6IFs2NSwgOTVdIH0sXG4gICAgeyBuYW1lOiAnU2VhdHRsZSwgV0EnLCB0ZW1wUmFuZ2U6IFs0MCwgNzVdIH0sXG4gICAgeyBuYW1lOiAnRGVudmVyLCBDTycsIHRlbXBSYW5nZTogWzI1LCA4MF0gfSxcbiAgXTtcbiAgXG4gIGNvbnN0IGNpdHkgPSBjaXRpZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2l0aWVzLmxlbmd0aCldO1xuICBjb25zdCB0ZW1wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGNpdHkudGVtcFJhbmdlWzFdIC0gY2l0eS50ZW1wUmFuZ2VbMF0pKSArIGNpdHkudGVtcFJhbmdlWzBdO1xuICBcbiAgcmV0dXJuIHtcbiAgICBsb2NhdGlvbjogY2l0eS5uYW1lLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGN1cnJlbnQ6IHtcbiAgICAgIHRlbXBlcmF0dXJlOiB0ZW1wLFxuICAgICAgdGVtcGVyYXR1cmVVbml0OiAnRicsXG4gICAgICBjb25kaXRpb25zOiBjb25kaXRpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbmRpdGlvbnMubGVuZ3RoKV0sXG4gICAgICBodW1pZGl0eTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApICsgMzAsXG4gICAgICB3aW5kU3BlZWQ6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1KSArIDUsXG4gICAgICB3aW5kVW5pdDogJ21waCcsXG4gICAgICB1dkluZGV4OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMSksXG4gICAgfSxcbiAgICBmb3JlY2FzdDogQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoXywgaSkgPT4gKHtcbiAgICAgIGRheTogbmV3IERhdGUoRGF0ZS5ub3coKSArIChpICsgMSkgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnc2hvcnQnIH0pLFxuICAgICAgY29uZGl0aW9uczogY29uZGl0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb25kaXRpb25zLmxlbmd0aCldLFxuICAgICAgaGlnaDogdGVtcCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSxcbiAgICAgIGxvdzogdGVtcCAtIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE1KSxcbiAgICB9KSksXG4gICAgc291cmNlOiAneDQwMi13ZWF0aGVyLXNlcnZpY2UnLFxuICAgIHByZW1pdW06IHRydWUsXG4gIH07XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGR5bmFtaWMgbWFya2V0IGFuYWx5c2lzIGRhdGFcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVNYXJrZXREYXRhKCk6IHVua25vd24ge1xuICBjb25zdCBjcnlwdG9zID0gW1xuICAgIHsgc3ltYm9sOiAnQlRDJywgbmFtZTogJ0JpdGNvaW4nLCBiYXNlUHJpY2U6IDk4MDAwIH0sXG4gICAgeyBzeW1ib2w6ICdFVEgnLCBuYW1lOiAnRXRoZXJldW0nLCBiYXNlUHJpY2U6IDM4MDAgfSxcbiAgICB7IHN5bWJvbDogJ1NPTCcsIG5hbWU6ICdTb2xhbmEnLCBiYXNlUHJpY2U6IDE0NSB9LFxuICAgIHsgc3ltYm9sOiAnQVZBWCcsIG5hbWU6ICdBdmFsYW5jaGUnLCBiYXNlUHJpY2U6IDQyIH0sXG4gICAgeyBzeW1ib2w6ICdNQVRJQycsIG5hbWU6ICdQb2x5Z29uJywgYmFzZVByaWNlOiAwLjg1IH0sXG4gIF07XG4gIFxuICBjb25zdCBtYXJrZXRzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICBcbiAgZm9yIChjb25zdCBjcnlwdG8gb2YgY3J5cHRvcykge1xuICAgIGNvbnN0IGNoYW5nZVBlcmNlbnQgPSAoTWF0aC5yYW5kb20oKSAqIDEwIC0gNSkudG9GaXhlZCgyKTtcbiAgICBjb25zdCBwcmljZSA9IGNyeXB0by5iYXNlUHJpY2UgKiAoMSArIHBhcnNlRmxvYXQoY2hhbmdlUGVyY2VudCkgLyAxMDApO1xuICAgIGNvbnN0IHZvbHVtZSA9IChNYXRoLnJhbmRvbSgpICogMzAgKyA1KS50b0ZpeGVkKDEpO1xuICAgIFxuICAgIG1hcmtldHNbY3J5cHRvLnN5bWJvbF0gPSB7XG4gICAgICBuYW1lOiBjcnlwdG8ubmFtZSxcbiAgICAgIHByaWNlOiBwcmljZS50b0ZpeGVkKDIpLFxuICAgICAgY2hhbmdlMjRoOiBgJHtwYXJzZUZsb2F0KGNoYW5nZVBlcmNlbnQpID49IDAgPyAnKycgOiAnJ30ke2NoYW5nZVBlcmNlbnR9JWAsXG4gICAgICB2b2x1bWUyNGg6IGAkJHt2b2x1bWV9QmAsXG4gICAgICBtYXJrZXRDYXA6IGAkJHsocHJpY2UgKiAoY3J5cHRvLnN5bWJvbCA9PT0gJ0JUQycgPyAxOS41IDogY3J5cHRvLnN5bWJvbCA9PT0gJ0VUSCcgPyAxMjAgOiA0MDApKS50b0ZpeGVkKDApfU1gLFxuICAgIH07XG4gIH1cbiAgXG4gIGNvbnN0IHNlbnRpbWVudHMgPSBbJ0J1bGxpc2gnLCAnQmVhcmlzaCcsICdOZXV0cmFsJywgJ1ZlcnkgQnVsbGlzaCcsICdDYXV0aW91c2x5IE9wdGltaXN0aWMnXTtcbiAgXG4gIHJldHVybiB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgbWFya2V0cyxcbiAgICBhbmFseXNpczoge1xuICAgICAgb3ZlcmFsbFNlbnRpbWVudDogc2VudGltZW50c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzZW50aW1lbnRzLmxlbmd0aCldLFxuICAgICAgc3VtbWFyeTogJ01hcmtldCBzaG93aW5nIG1peGVkIHNpZ25hbHMgd2l0aCBtYWpvciBjcnlwdG9jdXJyZW5jaWVzIGV4cGVyaWVuY2luZyB2YXJpZWQgbW9tZW50dW0uIFRlY2huaWNhbCBpbmRpY2F0b3JzIHN1Z2dlc3QgcG90ZW50aWFsIGNvbnNvbGlkYXRpb24gcGhhc2UuJyxcbiAgICAgIGtleUV2ZW50czogW1xuICAgICAgICAnRmVkZXJhbCBSZXNlcnZlIG1lZXRpbmcgc2NoZWR1bGVkIGZvciBuZXh0IHdlZWsnLFxuICAgICAgICAnTWFqb3IgcHJvdG9jb2wgdXBncmFkZSBhbm5vdW5jZWQgZm9yIEV0aGVyZXVtJyxcbiAgICAgICAgJ0luc3RpdHV0aW9uYWwgYWRvcHRpb24gY29udGludWVzIHRvIGdyb3cnLFxuICAgICAgXSxcbiAgICAgIHJpc2tMZXZlbDogWydMb3cnLCAnTWVkaXVtJywgJ0hpZ2gnXVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKV0sXG4gICAgfSxcbiAgICBzb3VyY2U6ICd4NDAyLW1hcmtldC1zZXJ2aWNlJyxcbiAgICBwcmVtaXVtOiB0cnVlLFxuICB9O1xufVxuXG4vKipcbiAqIENvbnRlbnQgZ2VuZXJhdG9ycyByZWdpc3RyeVxuICovXG5jb25zdCBDT05URU5UX0dFTkVSQVRPUlM6IFJlY29yZDxzdHJpbmcsICgpID0+IHVua25vd24+ID0ge1xuICB3ZWF0aGVyOiBnZW5lcmF0ZVdlYXRoZXJEYXRhLFxuICBtYXJrZXQ6IGdlbmVyYXRlTWFya2V0RGF0YSxcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENvbnRlbnQgTWFuYWdlclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENvbnRlbnQgTWFuYWdlciBjbGFzcyBmb3IgaGFuZGxpbmcgZHluYW1pYyBjb250ZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBDb250ZW50TWFuYWdlciB7XG4gIHByaXZhdGUgcmVnaXN0cnk6IENvbnRlbnRSZWdpc3RyeTtcbiAgXG4gIGNvbnN0cnVjdG9yKHJlZ2lzdHJ5OiBDb250ZW50UmVnaXN0cnkgPSBERUZBVUxUX0NPTlRFTlRfUkVHSVNUUlkpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gcmVnaXN0cnk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZXRzIHBheW1lbnQgcmVxdWlyZW1lbnRzIGZvciBhIGdpdmVuIHBhdGhcbiAgICovXG4gIGdldFBheW1lbnRSZXF1aXJlbWVudHMocGF0aDogc3RyaW5nKTogUGF5bWVudFJlcXVpcmVtZW50cyB8IG51bGwge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnJlZ2lzdHJ5Lml0ZW1zW3BhdGhdO1xuICAgIHJldHVybiBpdGVtPy5wcmljaW5nIHx8IG51bGw7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZXRzIGNvbnRlbnQgZm9yIGEgZ2l2ZW4gcGF0aFxuICAgKi9cbiAgYXN5bmMgZ2V0Q29udGVudChwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5yZWdpc3RyeS5pdGVtc1twYXRoXTtcbiAgICBcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiAnQ29udGVudCBub3QgZm91bmQnLCBwYXRoIH07XG4gICAgfVxuICAgIFxuICAgIHN3aXRjaCAoaXRlbS5zb3VyY2UudHlwZSkge1xuICAgICAgY2FzZSAnaW5saW5lJzpcbiAgICAgICAgcmV0dXJuIGl0ZW0uc291cmNlLmRhdGE7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZHluYW1pYyc6XG4gICAgICAgIGNvbnN0IGdlbmVyYXRvciA9IENPTlRFTlRfR0VORVJBVE9SU1tpdGVtLnNvdXJjZS5nZW5lcmF0b3JdO1xuICAgICAgICBpZiAoZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIGdlbmVyYXRvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGVycm9yOiAnR2VuZXJhdG9yIG5vdCBmb3VuZCcsIGdlbmVyYXRvcjogaXRlbS5zb3VyY2UuZ2VuZXJhdG9yIH07XG4gICAgICAgIFxuICAgICAgY2FzZSAnczMnOlxuICAgICAgICAvLyBTMyBjb250ZW50IHdvdWxkIGJlIGZldGNoZWQgaGVyZVxuICAgICAgICAvLyBOb3RlOiBMYW1iZGFARWRnZSBoYXMgbGltaXRlZCBTMyBhY2Nlc3MsIHNvIHRoaXMgd291bGQgbmVlZFxuICAgICAgICAvLyB0byBiZSBoYW5kbGVkIGRpZmZlcmVudGx5IGluIHByb2R1Y3Rpb24gKGUuZy4sIG9yaWdpbiByZXF1ZXN0KVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVycm9yOiAnUzMgY29udGVudCBub3QgYXZhaWxhYmxlIGluIGVkZ2UgZnVuY3Rpb24nLFxuICAgICAgICAgIGJ1Y2tldDogaXRlbS5zb3VyY2UuYnVja2V0LFxuICAgICAgICAgIGtleTogaXRlbS5zb3VyY2Uua2V5LFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7IGVycm9yOiAnVW5rbm93biBjb250ZW50IHNvdXJjZSB0eXBlJyB9O1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldHMgY29udGVudCBpdGVtIG1ldGFkYXRhXG4gICAqL1xuICBnZXRDb250ZW50SXRlbShwYXRoOiBzdHJpbmcpOiBDb250ZW50SXRlbSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdHJ5Lml0ZW1zW3BhdGhdIHx8IG51bGw7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBMaXN0cyBhbGwgYXZhaWxhYmxlIGNvbnRlbnQgcGF0aHNcbiAgICovXG4gIGxpc3RDb250ZW50UGF0aHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnJlZ2lzdHJ5Lml0ZW1zKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENoZWNrcyBpZiBhIHBhdGggcmVxdWlyZXMgcGF5bWVudFxuICAgKi9cbiAgcmVxdWlyZXNQYXltZW50KHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXRoIGluIHRoaXMucmVnaXN0cnkuaXRlbXM7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb250ZW50IHJlZ2lzdHJ5IHZlcnNpb25cbiAgICovXG4gIGdldFZlcnNpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RyeS52ZXJzaW9uO1xuICB9XG4gIFxuICAvKipcbiAgICogQWRkcyBvciB1cGRhdGVzIGEgY29udGVudCBpdGVtXG4gICAqL1xuICBzZXRDb250ZW50SXRlbShpdGVtOiBDb250ZW50SXRlbSk6IHZvaWQge1xuICAgIHRoaXMucmVnaXN0cnkuaXRlbXNbaXRlbS5wYXRoXSA9IGl0ZW07XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY29udGVudCBpdGVtXG4gICAqL1xuICByZW1vdmVDb250ZW50SXRlbShwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAocGF0aCBpbiB0aGlzLnJlZ2lzdHJ5Lml0ZW1zKSB7XG4gICAgICBkZWxldGUgdGhpcy5yZWdpc3RyeS5pdGVtc1twYXRoXTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2luZ2xldG9uIEluc3RhbmNlXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogRGVmYXVsdCBjb250ZW50IG1hbmFnZXIgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbnRlbnRNYW5hZ2VyID0gbmV3IENvbnRlbnRNYW5hZ2VyKCk7XG4iXX0=